#spring.jpa.generate-ddl=true
#spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.event.merge.entity_copy_observer=allow
# Enable batch inserts/updates for better performance when saving large numbers of entities
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
logging.level.web=info
# IPTV Trace Logging: Enable TRACE level exception logging for IPTV streaming diagnostics
# Uncomment the following lines to enable detailed exception logging for IPTV streaming:
# logging.level.io.skjaere.debridav.stream.StreamingService=TRACE
# logging.level.io.skjaere.debridav.debrid.client.DefaultStreamableLinkPreparer=TRACE
# See IPTV_TRACE_LOGGING_GUIDE.md for more details on viewing and filtering these logs
spring.servlet.multipart.max-file-size=-1
spring.servlet.multipart.max-request-size=-1
management.endpoints.web.exposure.include=health,realdebrid,prometheus,cache,streaming-download-tracking
management.endpoint.health.group.readiness.include=fileSystemImportService
management.endpoint.health.group.liveness.exclude=fileSystemImportService
management.endpoint.health.probes.enabled=true
debridav.root-path=${user.dir}/debridav-files
debridav.download-path=/downloads
debridav.mount-path=/data
debridav.debrid-clients=
debridav.delay-between-retries=200ms
debridav.retries-on-provider-error=1
debridav.wait-after-missing=24h
debridav.wait-after-network-error=1000ms
debridav.wait-after-provider-error=10m
debridav.wait-after-client-error=1000ms
debridav.should-delete-non-working-files=true
debridav.connect-timeout-milliseconds=5000
debridav.read-timeout-milliseconds=5000
debridav.enable-file-import-on-startup=true
debridav.chunk-caching-grace-period=0m
debridav.chunk-caching-size-threshold=5120000
debridav.cache-max-size-gb=10
debridav.local-entity-max-size-mb=130
debridav.default-categories=
debridav.torrent-lifetime=1d
# Optional: Debug suffix to append to contentPath in ARR torrent info API responses (for testing/debugging)
# When set, this suffix will be appended to all contentPath values in /api/v2/torrents/info responses
# (qBittorrent emulation API endpoint used by Sonarr/Radarr for torrent download client integration)
# This makes the paths invalid for Radarr/Sonarr, allowing you to inspect API responses without affecting actual downloads
# Example: debridav.debug-arr-torrent-info-content-path-suffix=__DEBUG_TESTING
# debridav.debug-arr-torrent-info-content-path-suffix=
# Database
debridav.db.host=localhost
debridav.db.port=5432
debridav.db.database-name=debridav
spring.datasource.username=debridav
spring.datasource.password=debridav
# five hours
spring.datasource.hikari.max-lifetime=180000000
spring.datasource.hikari.idle-timeout=0
spring.datasource.url=jdbc:postgresql://${debridav.db.host}:5432/debridav
spring.datasource.hikari.maximum-pool-size=5
# Premiumize
premiumize.api-key=
premiumize.bas-eurl=https://www.premiumize.me/api
# Real-Debrid
real-debrid.api-key=
real-debrid.base-url=https://api.real-debrid.com/rest/1.0
real-debrid.sync-enabled=true
real-debrid.sync-poll-rate=PT24H
# TorBox
torbox.api-key=
torbox.base-url=https://api.torbox.app
torbox.version=v1
torbox.request-timeout-millis=10000
torbox.socket-timeout-millis=10000
logging.level.io.milton.http.*=error

# IPTV Logging (set to DEBUG for detailed IPTV logs, INFO for normal operation)
# logging.level.io.skjaere.debridav.iptv=DEBUG
# logging.level.io.skjaere.debridav.iptv.IptvSyncService=DEBUG
# logging.level.io.skjaere.debridav.iptv.IptvRequestService=DEBUG
# logging.level.io.skjaere.debridav.iptv.IptvContentService=DEBUG
# logging.level.io.skjaere.debridav.iptv.IptvApiController=DEBUG
# logging.level.io.skjaere.debridav.iptv.IptvController=DEBUG
# logging.level.io.skjaere.debridav.iptv.parser.M3uParser=DEBUG
# logging.level.io.skjaere.debridav.iptv.client.XtreamCodesClient=DEBUG
# logging.level.io.skjaere.debridav.iptv.configuration.IptvConfigurationService=DEBUG
# IPTV-related logging in TorrentService
# logging.level.io.skjaere.debridav.torrent.TorrentService=DEBUG

# Easynews
easynews.username=
easynews.password=
easynews.api-base-url=https://members.easynews.com
easynews.enabled-for-torrents=true
easynews.rate-limit-window-duration=15s
easynews.allowed-requests-in-window=10
easynews.connect-timeout=20000
easynews.socket-timeout=5000
# Sonarr
sonarr.integration-enabled=false
sonarr.host=localhost
sonarr.port=8990
sonarr.api-base-path=/api/v3
sonarr.api-key=1105779a7abb40898567b406442cd927
sonarr.category=tv-sonarr
radarr.integration-enabled=false
radarr.host=localhost
radarr.port=7878
radarr.api-base-path=/api/v3
radarr.api-key=8d273d4f92294234a9cdddba605054e1
radarr.category=radarr

debridav.link-liveness-cache-duration=15m
debridav.cached-file-cache-duration=30m
debridav.streaming.delay-between-retries=50ms
debridav.streaming.retries-on-provider-error=2
debridav.streaming.wait-after-network-error=100ms
debridav.streaming.wait-after-provider-error=1m
debridav.streaming.wait-after-client-error=100ms

debridav.enable-chunk-caching=true
debridav.enable-in-memory-buffering=true

# Byte range chunking control - set to true to prevent aggressive chunking and caching
debridav.disable-byte-range-request-chunking=false

# Debrid direct download response cache expiration (default: 30s)
# Format: Duration (e.g., 30s, 1m, 60s)
# This controls how long debrid client response cache entries are kept before cleanup
# debridav.debrid-direct-dl-response-cache-expiration-seconds=30s

# Streaming download tracking cache expiration (default: 24h)
# Format: Duration in hours (e.g., 24h, 48h, 12h)
# This controls how long completed download tracking entries are kept before cleanup
# debridav.streaming-download-tracking-cache-expiration-hours=24h

# Local video file approach for ARR projects
# This serves small local video files instead of the actual media files to reduce bandwidth usage
# debridav.enable-rclone-arrs-local-video=false

# Video file mapping (single configuration option for all scenarios)
# Format: resolution=filepath,resolution=filepath
# Pipe syntax: resolution1|resolution2=filepath (multiple resolutions for same file)
# Default syntax: resolution|=filepath or =filepath (default fallback when no resolution matches)
# Single file syntax: filepath (default for all files)
# Examples:
#   Single file: debridav.rclone-arrs-local-video-file-paths=/tmp/video.mp4
#   Resolution mapping: debridav.rclone-arrs-local-video-file-paths=1080p=/tmp/video_1080p.mkv,720p=/tmp/video_720p.mp4
#   Mixed with default: debridav.rclone-arrs-local-video-file-paths=1080p=/tmp/video_1080p.mkv,/tmp/video_default.mp4
#   Pipe syntax: debridav.rclone-arrs-local-video-file-paths=2160p|1080p=/tmp/video_1080p.mkv,720p|=/tmp/video_720p.mp4
# debridav.rclone-arrs-local-video-file-paths=

# Regex pattern to match file paths for local video serving (optional)
# If not specified, all paths will be served with local video files
# Example: debridav.rclone-arrs-local-video-path-regex=.*\\.(mp4|mkv|avi)$
# debridav.rclone-arrs-local-video-path-regex=

# Minimum file size threshold for local video serving (optional)
# Files smaller than this threshold (in KB) will be served externally instead of using local video
# This is useful for serving small clips, trailers, or previews externally while using local video for large files
# Example: debridav.rclone-arrs-local-video-min-size-kb=1024 (1MB threshold)
# debridav.rclone-arrs-local-video-min-size-kb=

# ARR detection patterns (for local video serving)
# debridav.rclone-arrs-user-agent-pattern=rclone
# debridav.rclone-arrs-hostname-pattern=radarr

# IPTV
iptv.enabled=false
iptv.sync-interval=PT24H
iptv.initial-sync-delay=PT30S
iptv.providers=
# Optional: Language prefixes to try when searching IPTV content
# The system will try each prefix in order, and if results are found, return those results
# If no prefix produces results, it will fallback to searching without a prefix
# Prefixes can be enclosed in single or double quotes to preserve trailing spaces
# 
# Properties file examples: 
#   iptv.language-prefixes=EN - ,EN| ,EN | 
#   iptv.language-prefixes="EN - ","EN| ","EN | "
#   iptv.language-prefixes='EN - ','EN| ','EN | '
#
# Environment variable examples (comma-separated):
#   IPTV_LANGUAGE_PREFIXES=EN|,AM|
#   IPTV_LANGUAGE_PREFIXES="EN - ","EN| "
#
# Or use indexed format:
#   IPTV_LANGUAGE_PREFIXES_0=EN|
#   IPTV_LANGUAGE_PREFIXES_1=AM|
# iptv.language-prefixes=

# Optional: Include provider name in magnet title after -IPTV (for debugging)
# When enabled, the provider name will be included in the magnet title release group
# Example: Movie.Title.1990.1080p.BluRay.x264-IPTV-mega-NL (where "mega" is the provider name)
# Default: false
# iptv.include-provider-in-magnet-title=false

# Optional: Maximum number of search results to return (0 = unlimited)
# When set to a positive number, only the top N most relevant results will be returned
# Results are sorted by relevance score (exact matches first, then partial matches)
# This helps reduce noise when searching for common titles that return many results
# Example: iptv.max-search-results=5 (returns top 5 most relevant results)
# Default: 0 (unlimited)
# iptv.max-search-results=0

# Optional: Save IPTV provider responses to files for debugging
# When set, responses will be saved to this folder with filenames: {provider-name}_{response-type}.{ext}
# Example: iptv.response-save-folder=/path/to/iptv-responses
# Files are overwritten on each sync, so each provider's files won't conflict
# iptv.response-save-folder=

# Optional: Use local saved responses instead of making HTTP requests
# When true, the system will read from saved response files instead of fetching from providers
# Per-provider setting (iptv.provider.{name}.use-local-responses) takes precedence
# Example: iptv.use-local-responses=true
iptv.use-local-responses=false

# Optional: Rate limit for IPTV provider login/credential verification calls
# Format: Duration (e.g., 1m, 60s, PT1M)
# This controls how long to wait between login calls to the same IPTV provider
# Prevents excessive API calls when multiple requests come in quickly
# Default: 30 minutes (30m)
# Example: iptv.login-rate-limit=30m
# Example: iptv.login-rate-limit=30s
iptv.login-rate-limit=30m

# Examples:
# iptv.providers=provider1,provider2,my-iptv-service
# 
# iptv.initial-sync-delay: Delay before first sync runs after application startup (default: PT30S = 30 seconds)
# iptv.sync-interval: How often to sync IPTV content (default: PT24H = 24 hours)

# For provider1
# iptv.provider.provider1.type=m3u
# iptv.provider.provider1.m3u-url=https://example.com/playlist.m3u

# For provider2
# iptv.provider.provider2.type=xtream_codes
# iptv.provider.provider2.xtream-base-url=https://example.com:8080
# iptv.provider.provider2.xtream-username=user123
# iptv.provider.provider2.xtream-password=pass456

# IPTV Provider Configuration (example for provider named "provider1")
# iptv.provider.provider1.type=m3u
# iptv.provider.provider1.m3u-url=
# iptv.provider.provider1.m3u-file-path=
# iptv.provider.provider1.xtream-base-url=
# iptv.provider.provider1.xtream-username=
# iptv.provider.provider1.xtream-password=
# iptv.provider.provider1.priority=1
# iptv.provider.provider1.sync-enabled=true
# Set sync-enabled=false to disable automatic syncing for this provider
# Content from providers with sync disabled will remain searchable but won't be updated
#
# Optional per-provider: Use local saved responses instead of making HTTP requests
# When set, this overrides the global iptv.use-local-responses setting for this provider
# Example: iptv.provider.provider1.use-local-responses=true

# IPTV Metadata Service Configuration
# OMDB API key for resolving IMDB IDs to titles (optional)
# Get a free API key from http://www.omdbapi.com/apikey.aspx
# If not provided, IMDB ID lookups will be skipped and the system will fall back to query string searches
iptv.metadata.omdb-api-key=
iptv.metadata.omdb-base-url=https://www.omdbapi.com

# IPTV Series Metadata Cache Configuration
# Time-to-live for cached series metadata (episodes, series info)
# Format: Duration (e.g., PT168H for 7 days, PT24H for 24 hours, PT12H for 12 hours)
# Note: Java Duration.parse() doesn't support 'D' (days), use hours instead (7 days = 168 hours)
# Entries not accessed within this period will be purged
# Default: PT168H (7 days = 168 hours)
# Example: iptv.series-metadata-cache-ttl=PT168H
# Example: iptv.series-metadata-cache-ttl=PT24H
iptv.series-metadata-cache-ttl=PT168H

# Interval for running the series metadata purge job
# Format: Duration (e.g., PT24H for 24 hours, PT12H for 12 hours, PT1H for 1 hour)
# This controls how often the purge service checks for expired cache entries
# Default: PT24H (24 hours)
# Example: iptv.series-metadata-purge-interval=PT24H
# Example: iptv.series-metadata-purge-interval=PT12H
iptv.series-metadata-purge-interval=PT24H

# IPTV IMDB Metadata Cache Configuration
# Time-to-live for cached IMDB metadata (title, year information from OMDB API)
# Format: Duration (e.g., PT8760H for 365 days, PT168H for 7 days, PT24H for 24 hours)
# Note: Java Duration.parse() doesn't support 'D' (days), use hours instead (365 days = 8760 hours)
# Entries not accessed within this period will be purged
# Since IMDB information rarely changes, a longer TTL is recommended (default: 365 days)
# Default: PT8760H (365 days = 8760 hours)
# Example: iptv.imdb-metadata-cache-ttl=PT8760H
# Example: iptv.imdb-metadata-cache-ttl=PT168H
iptv.imdb-metadata-cache-ttl=PT8760H

# Interval for running the IMDB metadata purge job
# Format: Duration (e.g., PT24H for 24 hours, PT12H for 12 hours, PT1H for 1 hour)
# This controls how often the purge service checks for expired cache entries
# Default: PT24H (24 hours)
# Example: iptv.imdb-metadata-purge-interval=PT24H
# Example: iptv.imdb-metadata-purge-interval=PT12H
iptv.imdb-metadata-purge-interval=PT24H


